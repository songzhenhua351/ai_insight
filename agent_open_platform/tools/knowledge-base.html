<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知识库管理 - 智能体开放平台</title>
    <link rel="stylesheet" href="../assets/style.css">
</head>
<body>
    <div class="tech-background"></div>
    
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo"><a href="../index.html" style="color: inherit; text-decoration: none;">🤖 智能体开放平台</a></div>
            <ul class="nav-links">
                <li><a href="../index.html">首页</a></li>
                <li><a href="../lifecycle/index.html">生命周期管理</a></li>
                <li><a href="../enterprise/index.html">企业管理</a></li>
                <li><a href="index.html" class="active">工具管理</a></li>
                <li><a href="../ecosystem/index.html">研发生态</a></li>
                <li><a href="../assessment/index.html">价值评估</a></li>
            </ul>
        </div>
    </nav>

    <!-- 面包屑导航 -->
    <div class="breadcrumb">
        <a href="../index.html">首页</a>
        <span class="breadcrumb-separator">></span>
        <a href="index.html">工具管理</a>
        <span class="breadcrumb-separator">></span>
        <span>知识库管理</span>
    </div>

    <!-- 主要内容 -->
    <main class="container">
        <!-- 页面标题 -->
        <section class="page-title">
            <h1>🧠 知识库管理</h1>
            <p>构建和管理智能体的专业知识库，提供RAG能力支撑</p>
            <button class="btn" onclick="createKnowledgeBase()">+ 创建知识库</button>
        </section>

        <!-- 知识库概览 -->
        <section class="card">
            <h2>知识库概览</h2>
            <div class="dashboard">
                <div class="metric-card">
                    <div class="metric-value">45</div>
                    <div class="metric-label">总知识库数</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">12.8GB</div>
                    <div class="metric-label">总存储量</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">2,456</div>
                    <div class="metric-label">文档数量</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">98.3%</div>
                    <div class="metric-label">索引完成率</div>
                </div>
            </div>
        </section>

        <!-- 知识库列表 -->
        <section class="card">
            <h2>我的知识库</h2>
            <div class="toolbar">
                <div class="search-box">
                    <input type="text" placeholder="搜索知识库...">
                    <button class="btn">🔍</button>
                </div>
                <select class="filter-select">
                    <option value="">所有类型</option>
                    <option value="document">文档库</option>
                    <option value="qa">问答库</option>
                    <option value="code">代码库</option>
                    <option value="media">多媒体库</option>
                </select>
                <select class="filter-select">
                    <option value="">所有状态</option>
                    <option value="active">活跃</option>
                    <option value="indexing">索引中</option>
                    <option value="inactive">未激活</option>
                </select>
                <button class="btn" onclick="createKnowledgeBase()">+ 新建知识库</button>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>知识库名称</th>
                        <th>类型</th>
                        <th>文档数</th>
                        <th>大小</th>
                        <th>状态</th>
                        <th>最后更新</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>📚</span>
                                <span>产品技术文档</span>
                            </div>
                        </td>
                        <td>文档库</td>
                        <td>234</td>
                        <td>1.2GB</td>
                        <td><span class="status-badge status-active">活跃</span></td>
                        <td>2024-01-15</td>
                        <td>
                            <button class="btn btn-secondary" onclick="editKB('product-docs')">编辑</button>
                            <button class="btn btn-secondary" onclick="viewKB('product-docs')">查看</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>❓</span>
                                <span>客服问答库</span>
                            </div>
                        </td>
                        <td>问答库</td>
                        <td>1,856</td>
                        <td>892MB</td>
                        <td><span class="status-badge status-active">活跃</span></td>
                        <td>2024-01-14</td>
                        <td>
                            <button class="btn btn-secondary" onclick="editKB('customer-qa')">编辑</button>
                            <button class="btn btn-secondary" onclick="viewKB('customer-qa')">查看</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>💻</span>
                                <span>开发规范库</span>
                            </div>
                        </td>
                        <td>代码库</td>
                        <td>89</td>
                        <td>456MB</td>
                        <td><span class="status-badge status-warning">索引中</span></td>
                        <td>2024-01-13</td>
                        <td>
                            <button class="btn btn-secondary" onclick="editKB('dev-standards')">编辑</button>
                            <button class="btn btn-secondary" disabled>处理中</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>🎓</span>
                                <span>培训材料库</span>
                            </div>
                        </td>
                        <td>多媒体库</td>
                        <td>156</td>
                        <td>2.3GB</td>
                        <td><span class="status-badge status-pending">未激活</span></td>
                        <td>2024-01-12</td>
                        <td>
                            <button class="btn btn-secondary" onclick="editKB('training')">编辑</button>
                            <button class="btn" onclick="activateKB('training')">激活</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- 数据源管理 -->
        <section class="card">
            <h2>数据源管理</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div class="feature-item">
                    <h4>📄 文档上传</h4>
                    <p>支持PDF、Word、Markdown等多种格式</p>
                    <div style="margin-top: 1rem;">
                        <div class="upload-area" onclick="uploadFiles()">
                            <div>📁</div>
                            <div>点击或拖拽上传文件</div>
                            <div style="font-size: 0.875rem; color: #666;">支持 PDF, DOCX, MD, TXT</div>
                        </div>
                    </div>
                </div>
                <div class="feature-item">
                    <h4>🌐 网页爬取</h4>
                    <p>自动抓取和更新网页内容</p>
                    <div style="margin-top: 1rem;">
                        <input type="url" placeholder="输入网页URL" style="width: 100%; margin-bottom: 0.5rem;">
                        <button class="btn btn-secondary" style="width: 100%;">开始爬取</button>
                    </div>
                </div>
                <div class="feature-item">
                    <h4>🗄️ 数据库同步</h4>
                    <p>连接数据库，自动同步结构化数据</p>
                    <div style="margin-top: 1rem;">
                        <select style="width: 100%; margin-bottom: 0.5rem;">
                            <option>选择数据源</option>
                            <option>MySQL</option>
                            <option>PostgreSQL</option>
                            <option>MongoDB</option>
                        </select>
                        <button class="btn btn-secondary" style="width: 100%;">配置连接</button>
                    </div>
                </div>
                <div class="feature-item">
                    <h4>🔗 API接入</h4>
                    <p>通过API实时获取最新数据</p>
                    <div style="margin-top: 1rem;">
                        <input type="text" placeholder="API端点URL" style="width: 100%; margin-bottom: 0.5rem;">
                        <button class="btn btn-secondary" style="width: 100%;">测试连接</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 处理配置 -->
        <section class="card">
            <h2>文档处理配置</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                    <h3>文本预处理</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" checked> 去除特殊字符
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" checked> 统一编码格式
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox"> 繁简转换
                        </label>
                    </div>
                    <div class="form-group">
                        <label>语言检测阈值:</label>
                        <input type="range" min="0" max="100" value="80" style="width: 100%;">
                        <span>80%</span>
                    </div>
                </div>
                <div>
                    <h3>分块策略</h3>
                    <div class="form-group">
                        <label>分块大小:</label>
                        <select style="width: 100%;">
                            <option value="512">512 tokens</option>
                            <option value="1024" selected>1024 tokens</option>
                            <option value="2048">2048 tokens</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>重叠长度:</label>
                        <input type="number" value="100" style="width: 100%;"> tokens
                    </div>
                    <div class="form-group">
                        <label>分块方法:</label>
                        <select style="width: 100%;">
                            <option value="semantic" selected>语义分块</option>
                            <option value="fixed">固定长度</option>
                            <option value="paragraph">段落分块</option>
                        </select>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn">保存配置</button>
            </div>
        </section>

        <!-- 向量化设置 -->
        <section class="card">
            <h2>向量化设置</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div class="feature-item">
                    <h4>🧮 嵌入模型</h4>
                    <select style="width: 100%; margin-bottom: 1rem;">
                        <option value="text-embedding-ada-002" selected>OpenAI Ada-002</option>
                        <option value="bge-large-zh">BGE Large Chinese</option>
                        <option value="m3e-base">M3E Base</option>
                        <option value="custom">自定义模型</option>
                    </select>
                    <div style="font-size: 0.875rem; color: #666;">
                        当前模型维度: 1536
                    </div>
                </div>
                <div class="feature-item">
                    <h4>🗃️ 向量数据库</h4>
                    <select style="width: 100%; margin-bottom: 1rem;">
                        <option value="pinecone">Pinecone</option>
                        <option value="chroma" selected>ChromaDB</option>
                        <option value="weaviate">Weaviate</option>
                        <option value="qdrant">Qdrant</option>
                    </select>
                    <button class="btn btn-secondary" style="width: 100%;">测试连接</button>
                </div>
                <div class="feature-item">
                    <h4>⚙️ 索引参数</h4>
                    <div style="margin-bottom: 0.5rem;">
                        <label>批处理大小:</label>
                        <input type="number" value="100" style="width: 100%;">
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <label>相似度阈值:</label>
                        <input type="number" step="0.1" value="0.7" style="width: 100%;">
                    </div>
                    <button class="btn btn-secondary" style="width: 100%;">重建索引</button>
                </div>
            </div>
        </section>

        <!-- 创建知识库表单 -->
        <section class="card" id="createKBForm" style="display: none;">
            <h2>创建新知识库</h2>
            <form class="form">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <div>
                        <div class="form-group">
                            <label for="kbName">知识库名称*</label>
                            <input type="text" id="kbName" placeholder="输入知识库名称" required>
                        </div>
                        <div class="form-group">
                            <label for="kbType">知识库类型*</label>
                            <select id="kbType" required>
                                <option value="">选择类型</option>
                                <option value="document">文档库</option>
                                <option value="qa">问答库</option>
                                <option value="code">代码库</option>
                                <option value="media">多媒体库</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="kbLanguage">主要语言</label>
                            <select id="kbLanguage">
                                <option value="zh">中文</option>
                                <option value="en">英文</option>
                                <option value="mixed">混合</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="kbDescription">知识库描述*</label>
                            <textarea id="kbDescription" rows="4" placeholder="详细描述知识库的内容和用途" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="kbTags">标签</label>
                            <input type="text" id="kbTags" placeholder="用逗号分隔，例如: 技术,文档,产品">
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="cancelCreateKB()">取消</button>
                    <button type="submit" class="btn">创建知识库</button>
                </div>
            </form>
        </section>
    </main>

    <script>
        function createKnowledgeBase() {
            document.getElementById('createKBForm').style.display = 'block';
            document.getElementById('createKBForm').scrollIntoView({ behavior: 'smooth' });
        }

        function cancelCreateKB() {
            document.getElementById('createKBForm').style.display = 'none';
        }

        function editKB(kbId) {
            alert('编辑知识库: ' + kbId);
        }

        function viewKB(kbId) {
            alert('查看知识库详情: ' + kbId);
        }

        function activateKB(kbId) {
            alert('激活知识库: ' + kbId);
        }

        function uploadFiles() {
            alert('打开文件选择器');
        }
    </script>

    <style>
        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .upload-area:hover {
            border-color: #7877c6;
        }

        .upload-area > div:first-child {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .form {
            max-width: 100%;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .form-group textarea {
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }
    </style>
</body>
</html> 